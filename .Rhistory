pull(識別番号)
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (selected_event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == selected_event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
conbined_reacA <- union(conbined_reacM, conbined_reacW)
conbined_reacM
conbined_reacM <- pull(union(conbined_reacM, data.frame(識別番号 = reacM)))
conbined_reacM
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (selected_event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == selected_event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
}
conbined_reacM <- pull(union(conbined_reacM, data.frame(識別番号 = reacM)))
conbined_reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW)))
conbined_reacA <- pull(union(conbined_reacM, conbined_reacW))
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (selected_event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == selected_event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
}
conbined_reacM <- pull(union(conbined_reacM, data.frame(識別番号 = reacM)))
conbined_reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW)))
conbined_reacA <- pull(union(conbined_reacM, conbined_reacW))
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
# conbined_reacAにデータを結合
conbined_reacA <- union(conbined_reacM, conbined_reacW)
conbined_reacA
reacA <- union(conbined_reacM, conbined_reacW)
reacA
# 全体ークロス表を作成・表示　
cross_tableAll <- matrix(c(sum(reacA %in% drugA), length(drugA) - sum(reacA %in% drugA), length(reacA) - sum(reacA %in% drugA), {sum(demo2$性別 == "男性") + sum(demo2$性別 == "女性")} - length(drugA) - length(reacA) + sum(reacA %in% drugA)), nrow = 2, byrow = TRUE)
rownames(cross_tableAll) <- c("服用◯", "服用❌")
colnames(cross_tableAll) <- c("有害事象◯", "有害事象❌")
output$crossTableAll <- renderTable(cross_tableAll, rownames = TRUE)
# 全体ーオッズ比を計算・表示
odds_ratioAll <- (sum(reacA %in% drugA) * ({sum(demo2$性別 == "男性") + sum(demo2$性別 == "女性")} - length(drugA) - length(reacA) + sum(reacA %in% drugA))) / ((length(drugA) - sum(reacA %in% drugA)) * (length(reacA) - sum(reacA %in% drugA)))
#全体ー95%信頼区間の計算・表示
conf.lowAll  <- odds_ratioAll  -  exp(1.96 * sqrt(1/sum(reacA %in% drugA) + 1/({sum(demo2$性別 == "男性") + sum(demo2$性別 == "女性")} - length(drugA) - length(reacA) + sum(reacA %in% drugA)) + 1/(length(drugA) - sum(reacA %in% drugA)) + 1/(length(reacA) - sum(reacA %in% drugA))))
conf.highAll <- odds_ratioAll  +  exp(1.96 * sqrt(1/sum(reacA %in% drugA) + 1/({sum(demo2$性別 == "男性") + sum(demo2$性別 == "女性")} - length(drugA) - length(reacA) + sum(reacA %in% drugA)) + 1/(length(drugA) - sum(reacA %in% drugA)) + 1/(length(reacA) - sum(reacA %in% drugA))))
conf.lowAll
conf.highAll
length(reacA)
length(reacA)
reacA
summary(reac4)
summary(reacA)
length(reacA)
reacAA <- union(conbined_reacM, conbined_reacW)
reacA <- pull(data.frame(識別番号 = reacAA))
length(reacA)
reacA <- pull(data.frame(識別番号 = union(conbined_reacM, conbined_reacW)))
reacA
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame()
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
}
# conbined_reacMとconbined_reacWにデータを追加
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(conbined_reacM, conbined_reacW)))
conbined_reacM
conbined_reacM
reacA
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
}
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(conbined_reacM, conbined_reacW)))
conbined_reacM
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM2 <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW2 <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# reacMとreacWにデータを追加
reacM <- union(reacM, data.frame(識別番号 = reacM2))
reacW <- union(reacW, data.frame(識別番号 = reacW2))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacA
reacW
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM2 <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW2 <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# reacMとreacWにデータを追加
reacM <- pull(data.frame(識別番号 = reacM2))
reacW <- pull(data.frame(識別番号 = reacW2))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacM
reacM
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(識別番号 = character(0))
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacA
# 結果を保存する空のデータフレームを作成
reacM <- reacW  <- data.frame(識別番号 = character(0))
reacM
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW  <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM2 <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW2 <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# reacMとreacWにデータを追加
reacM <- pull(data.frame(識別番号 = reacM2))
reacW <- pull(data.frame(識別番号 = reacW2))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacA
# 結果を保存する空のデータフレームを作成
reacM <- reacW  <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM2 <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW2 <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# reacMとreacWにデータを追加
reacM <- pull(data.frame(識別番号 = reacM2))
reacW <- pull(data.frame(識別番号 = reacW2))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacA
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW  <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM2 <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW2 <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# reacMとreacWにデータを追加
reacM <- pull(data.frame(識別番号 = reacM2))
reacW <- pull(data.frame(識別番号 = reacW2))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacA
reac_amazon
selected_event
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame()
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- conbined_reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
# conbined_reacAにデータを結合
conbined_reacA <- union(conbined_reacM, conbined_reacW)
conbined_reacM
conbined_reacW
conbined_reacA
reacA <- pull(data.frame(識別番号 = union(conbined_reacM, conbined_reacW)))
reacA
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
conbined_reacM <- conbined_reacW <- reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
conbined_reacM <- union(conbined_reacM, data.frame(識別番号 = reacM))
conbined_reacW <- union(conbined_reacW, data.frame(識別番号 = reacW))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(conbined_reacM, conbined_reacW)))
reacA
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW_each <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
reacM <- union(conbined_reacM, data.frame(識別番号 = reacM_each))
reacW <- union(conbined_reacW, data.frame(識別番号 = reacW_each))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacM
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW_each <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
#reacW <- union(conbined_reacW, data.frame(識別番号 = reacW_each))
#reacW <- union(conbined_reacW, data.frame(識別番号 = reacW_each))
reacM <- pull(data.frame(IdentificationNumber = reacM))
reacW <- pull(data.frame(IdentificationNumber = reacW))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacM
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW_each <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
#reacW <- union(conbined_reacW, data.frame(識別番号 = reacW_each))
#reacW <- union(conbined_reacW, data.frame(識別番号 = reacW_each))
reacM <- pull(data.frame(IdentificationNumber = reacM_each))
reacW <- pull(data.frame(IdentificationNumber = reacW_each))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacM
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW_each <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW_each)))
reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW_each)))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(IdentificationNumber = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(AdverseEvent == event)
reacM_each <- reac_amazon %>%
filter(Gender == "男性") %>%
pull(IdentificationNumber)
reacW_each <- reac_amazon %>%
filter(Gender == "女性") %>%
pull(IdentificationNumber)
# reacMとreacWにデータを追加
reacM <- union(reacM, data.frame(IdentificationNumber = reacM_each))
reacW <- union(reacW, data.frame(IdentificationNumber = reacW_each))
}
reacW <- pull(data.frame(識別番号 = reacW_each))
reacW
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW_each <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
# reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW_each)))
#  reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW_each)))
reacW <- pull(data.frame(識別番号 = reacW_each))
reacM <- pull(data.frame(識別番号 = reacM_each))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacW
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reac_amazon
reacW <- pull(data.frame(識別番号 = reacW_each))
reacW
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
reacA
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacM_each
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW_each <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
reac_amazon
selected_event <- c("間質性肺疾患", "肝機能異常")
# 結果を保存する空のデータフレームを作成
reacM <- reacW <- reacA <- data.frame(識別番号 = character(0))
# 選択された各有害事象に対して処理を行う
for (event in selected_event) {
reac_amazon <- reac2 %>%
filter(有害事象 == event)
reacM_each <- reac_amazon %>%
filter(性別 == "男性") %>%
pull(識別番号)
reacW_each <- reac_amazon %>%
filter(性別 == "女性") %>%
pull(識別番号)
# conbined_reacMとconbined_reacWにデータを追加
# reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW_each)))
#  reacW <- pull(union(conbined_reacW, data.frame(識別番号 = reacW_each)))
reacW <- pull(data.frame(識別番号 = reacW_each))
reacM <- pull(data.frame(識別番号 = reacM_each))
}
# conbined_reacAにデータを結合
reacA <- pull(data.frame(識別番号 = union(reacM, reacW)))
runApp()
